(this.webpackJsonpsmplayer=this.webpackJsonpsmplayer||[]).push([[0],{178:function(e,t,n){e.exports=n(318)},189:function(e,t,n){},192:function(e,t,n){},318:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),o=n.n(i),s=n(24),c=(n(188),n(189),n(20)),l=n.n(c),u=n(35),f=n(15),h=n(167),d=n(329),p=n(51),m=n(150),v=n.n(m),g=(n(191),n(192),n(80)),b=n(21),y=n(22),O=n(23),w=n(27),E=["left","down","up","right"],k=["Beginner","Basic","Difficult","Expert","Challenge"],P=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"cors"});case 2:return n=e.sent,a=n.body.getReader(),r=new TextDecoder("utf-8"),e.next=7,a.read();case 7:return i=e.sent,e.abrupt("return",r.decode(i.value));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return window.location.href+"assets/"+e},j=function(e){return window.location.href+"jackets/"+e},S=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},D={};E.forEach((function(e){D["rainbow_".concat(e)]=new Image,D["rainbow_".concat(e)].src=_("rainbow_".concat(e,".png")),D["note_".concat(e)]=new Image,D["note_".concat(e)].src=_("note_".concat(e,".png")),D["vivid_".concat(e)]=new Image,D["vivid_".concat(e)].src=_("vivid_".concat(e,".png")),D["flat_".concat(e)]=new Image,D["flat_".concat(e)].src=_("vivid_".concat(e,".png")),D["freeze_tail_active_".concat(e)]=new Image,D["freeze_tail_active_".concat(e)].src=_("freeze_tail_active_".concat(e,".png")),D["freeze_tail_inactive_".concat(e)]=new Image,D["freeze_tail_inactive_".concat(e)].src=_("freeze_tail_inactive_".concat(e,".png")),D["freeze_body_active_".concat(e)]=new Image,D["freeze_body_active_".concat(e)].src=_("freeze_body_active_".concat(e,".png")),D["freeze_body_inactive_".concat(e)]=new Image,D["freeze_body_inactive_".concat(e)].src=_("freeze_body_inactive_".concat(e,".png")),D["shock_".concat(e)]=new Image,D["shock_".concat(e)].src=_("shock_".concat(e,".png"))}));["freeze_head","tap_explosion"].forEach((function(e){D[e]=new Image,D[e].src=_("".concat(e,".png"))}));var A=function(){function e(t){Object(y.a)(this,e);var n=t.key,a=t.mods,r=a.speed,i=a.noteskin,o=a.colorFreezes;this.key=n,this.speed=r,this.note=t.note,this.noteskin=i,this.measureIdx=t.measureIdx,this.measureN=t.measureN,this.measureD=t.measureD,this.colorFreezes=o,this.originalBeatPosition=t.originalBeatPosition,this.holdBeats=t.holdBeats||null,this.hitFrame=0,this.previousBeatPosition=null}return Object(O.a)(e,[{key:"reset",value:function(){this.hitFrame=0}},{key:"currentBeatPosition",value:function(e){return this.originalBeatPosition-e}},{key:"render",value:function(e,t){for(var n=e.getContext("2d"),a=e.height,r=0;r<this.note.length;r++)if("0"!==this.note[r]){var i=void 0,o=void 0,s=void 0,c=void 0,l=void 0,u=E[r];if("1"===this.note[r]||"2"===this.note[r]&&this.colorFreezes){if(i=D["".concat(this.noteskin,"_").concat(u)],this.note.includes("2")&&!this.colorFreezes)i=D.freeze_head,o=64*E.indexOf(u),s=0;else if("rainbow"===this.noteskin){o=Math.floor(4*t)%8*64;var f=this.measureD/4,h=this.measureN%f;0===h?s=0:0<h&&h<=f/4?s=1:f/4<h&&h<=f/2?s=2:f/2<h&&h<=3*f/4?s=3:3*f/4<h&&h<f&&(s=0),s*=64}else if("note"===this.noteskin){o=Math.floor(4*t)%8*64;var d=this.measureN/this.measureD;s=[0,.25,.5,.75].includes(d)?0:[1/8,3/8,5/8,7/8].includes(d)?1:[1/16,3/16,5/16,7/16,9/16,.6875,.8125,.9375].includes(d)?3:2,s*=64}else if("vivid"===this.noteskin){o=Math.floor(4*t)%4*64;var p=this.measureD/4,m=this.measureN%p;0===m?s=0:0<m&&m<=p/4?s=1:p/4<m&&m<=p/2?s=2:p/2<m&&m<=3*p/4?s=3:3*p/4<m&&m<p&&(s=0),s=(s+Math.floor(t)%4)%4*64}else"flat"===this.noteskin&&(i=D["vivid_".concat(u)],o=Math.floor(4*t)%4*64,s=Math.floor(t)%4*64);c=64*E.indexOf(u),(l=64*this.currentBeatPosition(t)*this.speed)>0&&l<a&&n.drawImage(i,o,s,64,64,c,l,64,64),l<=0?this.hitFrame<=12&&(n.save(),n.globalAlpha=1-Math.pow(this.hitFrame/12,3),n.drawImage(D.tap_explosion,0,0,64,64,c-2-this.hitFrame,-2-this.hitFrame,68+2*this.hitFrame,68+2*this.hitFrame),n.restore(),this.hitFrame++):this.hitFrame=0}else if("2"===this.note[r])i=D.freeze_head,o=64*E.indexOf(u),s=0,c=64*E.indexOf(u),(l=64*this.currentBeatPosition(t)*this.speed)>0&&l<a&&n.drawImage(i,o,s,64,64,c,l,64,64),l<=0?this.hitFrame<=12&&(n.save(),n.globalAlpha=1-Math.pow(this.hitFrame/12,3),n.drawImage(D.tap_explosion,0,0,64,64,c-this.hitFrame,0-this.hitFrame,64+2*this.hitFrame,64+2*this.hitFrame),n.restore(),this.hitFrame++):this.hitFrame=0;else if("3"===this.note[r]){i=D["freeze_tail_inactive_".concat(u)],o=0,s=0,c=64*E.indexOf(u),l=64*this.currentBeatPosition(t)*this.speed;var v=D["freeze_body_inactive_".concat(u)],g=64*this.holdBeats[r]*this.speed-32,b=Math.floor(g/128),y=g%128,O=y,w=l-(g+32),k=!1;w<0&&(y+=w,w=0,i=D["freeze_tail_active_".concat(u)],v=D["freeze_body_active_".concat(u)],l>0&&(k=!0)),w>-y&&w<a&&n.drawImage(v,0,128-y,64,y,c,w+32,64,y);for(var P=1;P<=b;P++){var _=128,j=0,S=l-(g+32-O-128*(P-1));S<0&&S>-128&&(_+=S,j-=S,S=0),S>-_&&S<a&&n.drawImage(v,0,j,64,_,c,S+32,64,_)}var A=64;if(64*this.holdBeats[r]*this.speed<32){var x=64*this.holdBeats[r]*this.speed;s+=32-x,l+=32-x,A=64-x}if(l<32&&l>0&&(s+=32-l,l=32),l>0&&l<a&&n.drawImage(i,o,s,64,A,c,l,64,A),k){var C=D.freeze_head;this.hitFrame<=12&&n.drawImage(C,64*E.indexOf(u),128,64,64,64*E.indexOf(u),0,64,64)}l<=0?this.hitFrame<=12&&(n.save(),n.globalAlpha=1-Math.pow(this.hitFrame/12,3),n.drawImage(D.tap_explosion,0,0,64,64,c-this.hitFrame,0-this.hitFrame,64+2*this.hitFrame,64+2*this.hitFrame),n.restore(),this.hitFrame++):this.hitFrame=0}this.previousBeatPosition=this.currentBeatPosition(t)}}}]),e}(),x={};E.forEach((function(e){x["shock_".concat(e)]=new Image,x["shock_".concat(e)].src=_("shock_".concat(e,".png"))}));var C=function(){function e(t){Object(y.a)(this,e);var n=t.key,a=t.mods,r=a.speed,i=a.noteskin;this.key=n,this.speed=r,this.note=t.note,this.noteskin=i,this.originalBeatPosition=t.originalBeatPosition}return Object(O.a)(e,[{key:"currentBeatPosition",value:function(e){return this.originalBeatPosition-e}},{key:"render",value:function(e,t,n){var a=e.getContext("2d"),r=e.height;t=Math.floor(t/3)%8;for(var i=0;i<this.note.length;i++){var o=E[i],s=x["shock_".concat(o)],c=t%4*64,l=64*Math.floor(t/4),u=64*E.indexOf(o),f=64*this.currentBeatPosition(n)*this.speed;f>-64&&f<r&&a.drawImage(s,c,l,64,64,u,f,64,64)}}}]),e}(),N={};E.forEach((function(e){N[e]=new Image,N[e].src=_("".concat(e,"_tap_flash.png")),N[e]=new Image,N[e].src=_("".concat(e,"_tap_flash.png"))}));var I={};E.forEach((function(e){I[e]=new Image,I[e].src=_("".concat(e,"_tap_receptor.png")),I[e]=new Image,I[e].src=_("".concat(e,"_tap_receptor.png"))}));var L=function(){function e(){Object(y.a)(this,e)}return Object(O.a)(e,[{key:"render",value:function(e,t){var n=e.getContext("2d"),a=t%1>0&&t%1<.25;E.forEach((function(e,t){n.drawImage(a?N[e]:I[e],0,0,64,64,64*t,0,64,64)}))}}]),e}(),T=function(){function e(t){Object(y.a)(this,e);var n=t.mods.speed;this.speed=n,this.finalBeat=t.finalBeat}return Object(O.a)(e,[{key:"render",value:function(e,t){for(var n=e.getContext("2d"),a=e.height,r=0;r<=this.finalBeat;r++){var i=64*(r-t)*this.speed+32,o=r%4===0?2:.8;i>0&&i<a&&(n.beginPath(),n.moveTo(0,i),n.lineTo(e.width,i),n.lineWidth=o,n.strokeStyle="#fff",n.stroke())}}}]),e}(),B=/dance-([a-z]+)/,R=/(Beginner|Easy|Medium|Hard|Challenge|Edit)/,F={Beginner:"Beginner",Easy:"Basic",Medium:"Difficult",Hard:"Expert",Challenge:"Challenge"},M=function(e){var t={},n="";/#BPMS:/i.test(e)&&(n=(n=/#BPMS:([\s\S]*?)\s*;/i.exec(e)[1]).length?n.split(",").map((function(e){var t=e.split("="),n=Object(f.a)(t,2),a=n[0],r=n[1];return{beat:parseFloat(a),value:parseFloat(r)}})):[]);var a="";return/#STOPS:/i.test(e)&&(a=(a=/#STOPS:([\s\S]*?)\s*;/i.exec(e)[1]).length?a.split(",").map((function(e){var t=e.split("="),n=Object(f.a)(t,2),a=n[0],r=n[1];return{beat:parseFloat(a),value:parseFloat(r)}})):[]),e.slice(e.indexOf("#NOTES:")).split(/#NOTES:\s+/).slice(1).forEach((function(e){var r=B.exec(e)[1],i=R.exec(e)[1],o=F[i];t["".concat(r,"_").concat(o)]={difficulty:o,mode:r,bpms:n,stops:a};var s=t["".concat(r,"_").concat(o)],c=new RegExp("".concat(i,":\\s+([0-9]+):")),l=parseInt(c.exec(e)[1]);s.level=l;var u=e.slice(e.lastIndexOf(":")+1,e.lastIndexOf(";")).trim().split(",").map((function(e,t){var n=e.trim().split("\r\n").filter((function(e){return!e.startsWith("//")})),a=n.length,r=[];return n.forEach((function(e,n){if(e.split("").filter((function(e){return"0"!==e})).length){var i={};i.note=e,i.measureIdx=t,i.measureN=n,i.measureD=a,r.push(i)}})),r}));s.chart=u})),t};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var U=function(e,t){var n=t.turn,a=t.shuffle,r={off:"LDUR",mirror:"RUDL",left:"ULRD",right:"DRLU",shuffle1:"LRDU",shuffle2:"UDRL",shuffle3:"LRUD",shuffle4:"DURL",shuffle5:"DLUR",shuffle6:"DULR",shuffle7:"RLUD",shuffle8:"RULD"},i=n;return"shuffle"===n&&(i+=a),e.map((function(e){var t=e.note;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{note:r[i].split("").map((function(e){return t[r.off.indexOf(e)]}))})}))},z=n(107),H=n(34),X=n(151),Z=function(e){return function(t){t({type:"SET_CHART_PROGRESS",payload:e})}};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={chartAudio:{status:"stopped",progress:0},previewAudio:{status:"stopped"}},Y=function(e){return function(t){t({type:"CHANGE_ACTIVE_BPM_DISPLAY",payload:e})}};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={activeBpm:null,bpmChangeQueue:[]},$={difficulty:["Beginner","Basic","Difficult","Expert","Challenge"],mods:{speed:[.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,3.25,3.5,3.75,4,4.5,5,5.5,6,6.5,7,7.5,8],turn:["off","mirror","left","right","shuffle"],shuffle:[1,2,3,4,5,6,7,8],noteskin:["rainbow","note","vivid","flat"]}},ee="Challenge",te={speed:1.5,turn:"off",shuffle:1,noteskin:"note",colorFreezes:!1};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=te,ie={},oe=Object(H.c)({audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAY_CHART_AUDIO":var n=Q({},e.chartAudio,{status:"playing"});return Q({},e,{chartAudio:n});case"PAUSE_CHART_AUDIO":var a=Q({},e.chartAudio,{status:"paused"});return Q({},e,{chartAudio:a});case"STOP_CHART_AUDIO":var r=Q({},e.chartAudio,{status:"stopped"});return Q({},e,{chartAudio:r});case"PLAY_PREVIEW_AUDIO":var i=Q({},e.previewAudio,{status:"playing"});return Q({},e,{previewAudio:i});case"STOP_PREVIEW_AUDIO":var o=Q({},e.previewAudio,{status:"stopped"});return Q({},e,{previewAudio:o});case"SET_CHART_PROGRESS":var s=Q({},e.chartAudio,{progress:t.payload});return Q({},e,{chartAudio:s});default:return e}},chart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BPM_CHANGE_QUEUE":return J({},e,{bpmChangeQueue:Object(g.a)(t.payload)});case"CHANGE_ACTIVE_BPM_DISPLAY":var n=Math.round(t.payload);return J({},e,{activeBpm:n});default:return e}},mods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MODS":var n=t.payload;return ae({},e,{},n);default:return e}},songSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),se=Object(H.e)(oe,Object(H.d)(Object(H.a)(X.a),window.devToolsExtension?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),ce=new(function(){function e(){Object(y.a)(this,e),this.sources={song:{},preview:{}},this.currentSong=null,this.currentPreview=null,this.currentSongId=null,this.currentPreviewId=null,this.activeView=null,this.previewFadeTimeout=null,this.updateTimeline=this.updateTimeline.bind(this),this.updateProgress=this.updateProgress.bind(this),this.audioResyncFrames=0}return Object(O.a)(e,[{key:"getCurrentSong",value:function(){return this.sources.song[this.currentSong]}},{key:"getCurrentPreview",value:function(){return this.sources.preview[this.currentPreview]}},{key:"storeAudioSource",value:function(e){var t=this;this.sources.song[e.hash]||(this.setLoadingAudio(!0),this.sources.song[e.hash]={title:e.title},this.sources.song[e.hash].audio=new z.Howl({src:"https://dl.dropboxusercontent.com/s/".concat(e.dAudioUrl),format:["mp3"],html5:!0,onload:function(){t.setLoadingAudio(!1)},onloaderror:function(e,t,n){alert("".concat(e,";;; ").concat(t,";;; ").concat(n))},onplay:function(){t.getCurrentSong().tl.play(),t.resync(),w.a.ticker.add(t.updateProgress),se.dispatch((function(e){e({type:"PLAY_CHART_AUDIO"})}))},onpause:function(){t.getCurrentSong().tl.pause(),w.a.ticker.remove(t.updateTimeline),w.a.ticker.remove(t.updateProgress),se.dispatch((function(e){e({type:"PAUSE_CHART_AUDIO"})}))},onseek:function(){},onstop:function(){t.getCurrentSong().tl&&t.getCurrentSong().tl.restart().pause(),w.a.ticker.remove(t.updateTimeline),se.dispatch((function(e){e({type:"STOP_CHART_AUDIO"})}))},onend:function(e){w.a.ticker.remove(t.updateTimeline),se.dispatch((function(e){e({type:"STOP_CHART_AUDIO"})}))}}),this.sources.preview[e.hash]={title:e.title},this.sources.preview[e.hash].audio=new z.Howl({src:"https://dl.dropboxusercontent.com/s/".concat(e.dAudioUrl),format:["mp3"],html5:!0,sprite:{sample:[parseFloat(1e3*(e.sampleStart-.12)),parseFloat(1e3*e.sampleLength)]},onplay:function(){se.dispatch((function(e){e({type:"PLAY_PREVIEW_AUDIO"})}))},onstop:function(){clearTimeout(t.previewFadeTimeout),t.currentPreviewId=null,se.dispatch((function(e){e({type:"STOP_PREVIEW_AUDIO"})}))},onend:function(){clearTimeout(t.previewFadeTimeout),t.currentPreviewId=null,se.dispatch((function(e){e({type:"STOP_PREVIEW_AUDIO"})}))}}))}},{key:"selectSong",value:function(e){this.currentSong&&this.getCurrentSong().audio.stop(this.currentSongId),this.storeAudioSource(e),this.currentSong=e.hash}},{key:"setTimeline",value:function(e){this.getCurrentSong().tl=e}},{key:"setGlobalParams",value:function(e){this.getCurrentSong().globalParams=e}},{key:"resync",value:function(){this.audioResyncFrames=10,w.a.ticker.add(this.updateTimeline)}},{key:"updateTimeline",value:function(){if(this.getCurrentSong().tl.seek(this.getCurrentTime()+.07),this.audioResyncFrames--,this.audioResyncFrames<=0){var e=function(e){for(var t=e.beatTick,n=e.bpmChangeQueue,a=0,r=0;r<n.length;r++){var i=n[r];if(i.beat>t)return a;a=i.value}return a}(this.getCurrentSong().globalParams);se.dispatch(Y(e)),w.a.ticker.remove(this.updateTimeline)}}},{key:"updateProgress",value:function(e,t,n){if(n%15===0){var a=this.getCurrentSong().audio,r=a.seek()/a.duration();se.dispatch(Z(r))}}},{key:"play",value:function(){this.currentSongId=this.getCurrentSong().audio.play()}},{key:"pause",value:function(){this.getCurrentSong().audio.pause(this.currentSongId)}},{key:"stop",value:function(){this.getCurrentSong().audio.stop(this.currentSongId),this.currentSongId=null}},{key:"getCurrentTime",value:function(){return this.getCurrentSong().audio.seek()}},{key:"goBack",value:function(e){this.seekTime(this.getCurrentTime()-.001*e)}},{key:"goForward",value:function(e){this.seekTime(this.getCurrentTime()+.001*e)}},{key:"seekTime",value:function(e){this.getCurrentSong().audio.seek(e),this.resync()}},{key:"seekProgress",value:function(e){this.seekTime(e*this.getCurrentSong().audio.duration()),se.dispatch(Z(e))}},{key:"isPlaying",value:function(){return this.getCurrentSong()&&this.getCurrentSong().audio.playing(this.currentSongId)}},{key:"isPaused",value:function(){return this.getCurrentSong()&&!this.getCurrentSong().audio.playing(this.currentSongId)}},{key:"playSongPreview",value:function(e){var t=this;this.currentPreview&&this.getCurrentPreview().audio.stop(this.currentPreviewId),this.storeAudioSource(e),this.currentPreview=e.hash;var n=this.getCurrentPreview().audio;this.currentPreviewId=n.play("sample"),n.on("play",(function(){var n=t.getCurrentPreview().audio;n.fade(0,1,200),t.previewFadeTimeout=setTimeout((function(){n.fade(1,0,2e3)}),1e3*e.sampleLength-2e3)}))}},{key:"stopSongPreview",value:function(){this.currentPreview&&this.getCurrentPreview().audio.stop(this.currentPreviewId)}},{key:"isPreviewPlaying",value:function(){return this.getCurrentPreview()&&this.getCurrentPreview().audio.playing(this.currentPreviewId)}}]),e}());function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=function(){function e(t,n){Object(y.a)(this,e),this.canvas=t,this.c=t.getContext("2d"),this.tl=w.a.timeline(),this.sm=n,this.simfiles={},this.eventList=[],this.arrows=[],this.shockArrows=[],this.drawBackground(),this.globalParams={beatTick:0,frame:0,bpmChangeQueue:[]},this.sm&&(this.simfiles=M(this.sm)),this.mainLoop()}return Object(O.a)(e,[{key:"generateEventList",value:function(e){for(var t=e.bpms,n=e.stops,a=[],r=0,i=0,o=t[0].value;r<t.length&&i<n.length;){var s=t[r],c=n[i];c.beat<=s.beat?(a.push(ue({},c,{bpm:o,type:"stop"})),i++):(a.push(ue({},s,{type:"bpm"})),o=s.value,this.globalParams.bpmChangeQueue.push(s),r++)}for(;r<t.length;)a.push(ue({},t[r],{type:"bpm"})),this.globalParams.bpmChangeQueue.push(t[r]),r++;for(;i<n.length;)a.push(ue({},n[i],{bpm:o,type:"stop"})),i++;a[0].timestamp=0;for(var l=1;l<a.length;l++){var u=a[l-1],f=a[l],h=a[l-1].timestamp,d=(f.beat-u.beat)/("bpm"===u.type?u.value:u.bpm)*60;"stop"===u.type&&(d+=u.value);var p=h+d;f.timestamp=p}return this.eventList=a,a}},{key:"generateArrows",value:function(e,t){var n=this,a=e.chart;if(Array.isArray(a[0])){var r=[];a.forEach((function(e){r.push.apply(r,Object(g.a)(e))})),a=r}(a=U(a,t)).forEach((function(e,t){var n=e.measureIdx,r=e.measureN,i=e.measureD;e.currentBeatPosition=4*(n+r/i),e.originalBeatPosition=e.currentBeatPosition;for(var o=0;o<e.note.length;o++)if("3"===e.note[o])for(var s=t-1;s>=0;s--)if("2"===a[s].note[o]){a[s].holdBeats||(a[s].holdBeats=[]),e.holdBeats||(e.holdBeats=[]),a[s].holdBeats[o]=e.currentBeatPosition-a[s].currentBeatPosition,e.holdBeats[o]=e.currentBeatPosition-a[s].currentBeatPosition;break}})),a.forEach((function(e,a){if("M"===e.note[0]||"M"===e.note[4]){var r=new C(ue({key:a},e,{mods:t}));n.shockArrows.push(r)}else{var i=new A(ue({key:a},e,{mods:t}));n.arrows.push(i)}})),this.stepZone=new L}},{key:"initTimeline",value:function(e){var t,n=this;this.resetArrows();var a=0,r=this.arrows[this.arrows.length-1],i=this.eventList[this.eventList.length-1],o=0;r&&i?o=Math.max(r.originalBeatPosition,i.beat):r?o=r.originalBeatPosition:i&&(o=i.beat),o+=8,this.tl=this.tl.to({},{duration:0},0);for(var s=function(e){var r=n.eventList[e],i=n.eventList[e+1],s="stop"===r.type?r.value:0;if("bpm"===r.type?t=r.value:"stop"===r.type&&(t=r.bpm),i){var c=i.beat-r.beat,l=c/t*60;n.tl=n.tl.to(n.globalParams,{beatTick:a+c,duration:l,ease:"none",onStart:function(){"bpm"===r.type&&se.dispatch(Y(r.value))}},"+=".concat(s)),a+=c}else n.tl=n.tl.to(n.globalParams,{beatTick:o,duration:(o-a)/t*60,ease:"none",onStart:function(){"bpm"===r.type&&se.dispatch(Y(r.value))}},"+=".concat(s))},c=0;c<this.eventList.length;c++)s(c);this.guidelines=new T({mods:e,finalBeat:o}),ce.setTimeline(this.tl),ce.setGlobalParams(this.globalParams)}},{key:"resetArrows",value:function(){this.arrows.forEach((function(e){return e.reset()}))}},{key:"mainLoop",value:function(){this.drawBackground(),this.stepZone&&this.stepZone.render(this.canvas,this.globalParams.beatTick),this.guidelines&&this.guidelines.render(this.canvas,this.globalParams.beatTick);for(var e=this.shockArrows.length-1;e>=0;e--){this.shockArrows[e].render(this.canvas,this.globalParams.frame,this.globalParams.beatTick)}for(var t=this.arrows.length-1;t>=0;t--){this.arrows[t].render(this.canvas,this.globalParams.beatTick)}this.globalParams.frame++,window.requestAnimationFrame(this.mainLoop.bind(this))}},{key:"drawBackground",value:function(){this.c.fillStyle="black",this.c.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"toggleTl",value:function(){this.tl.paused()?(console.log("tl.play()"),this.tl.play()):(console.log("tl.pause()"),this.tl.pause())}},{key:"restartTl",value:function(){this.tl.restart().pause(),this.resetArrows()}},{key:"pauseTl",value:function(){this.tl.pause()}}]),e}(),he=function(e){var t=Object(a.useRef)(),n=e.progress;e.gameEngine;Object(a.useEffect)((function(){t.current.addEventListener("touchstart",(function(e){i(e.touches[0])})),t.current.addEventListener("touchmove",(function(e){i(e.touches[0])})),t.current.addEventListener("touchend",(function(e){}))}),[]);var i=function(e){var n=t.current.offsetWidth,a=(e.clientX-t.current.offsetLeft)/n;a<0||a>1||ce.seekProgress(a)};return r.a.createElement("div",{id:"progress-bar",ref:t},r.a.createElement("div",{className:"progress-value",style:{width:"".concat(100*n,"%")}}))},de=Object(s.b)((function(e){var t=e.audio,n=e.chart,a=e.mods;return{audio:t.chartAudio,chart:n,mods:a}}),(function(e){return{}}))((function(e){var t=e.selectedDifficulty,n=e.selectedSong,i=e.sm,o=e.mods,s=(e.selectedAudio,e.loadingAudio),c=e.gameEngine,l=e.setGameEngine,u=Object(a.useState)(null),h=Object(f.a)(u,2),m=h[0],g=h[1];Object(a.useEffect)((function(){if(!s){var e=document.querySelector("#chartArea");g(e);var t=new v.a(e);t.on("panup",(function(e){ce.goForward(20)})),t.on("pandown",(function(e){ce.goBack(20)}))}}),[s]),Object(a.useEffect)((function(){if(m){var e=new fe(m,i);if(t){var n=e.simfiles["single_".concat(t)];n&&(e.generateEventList(n),e.generateArrows(n,o),e.initTimeline(o),e.restartTl(),ce.resync()),l(e)}}}),[m,i,t,o]);return r.a.createElement("div",{className:"canvas-container"},s&&r.a.createElement("div",null,"Loading audio..."),!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{id:"chartArea",width:"256",height:"448"}),r.a.createElement("div",{className:"progress-container"},r.a.createElement(he,{progress:e.audio.progress,gameEngine:c}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"play-controls"},r.a.createElement(d.a,{onClick:function(){return ce.goBack(100)},disabled:0===e.audio.progress,className:"play-control"},r.a.createElement(p.a,{name:"backward"})),r.a.createElement(d.a,{onClick:function(){c&&("playing"===e.audio.status?ce.pause():ce.play())},disabled:!(c&&!s),className:"play-control"},r.a.createElement(p.a,{name:"playing"===e.audio.status?"pause":"play"})),r.a.createElement(d.a,{onClick:function(){c&&ce.stop()},className:"play-control"},r.a.createElement(p.a,{name:"stop"})),r.a.createElement(d.a,{onClick:function(){return ce.goForward(100)},className:"play-control"},r.a.createElement(p.a,{name:"forward"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"song-information"},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"song-title"},n.title),r.a.createElement("div",{className:"song-artist"},n.artist))),r.a.createElement("div",{className:"bpm-information"},r.a.createElement("div",{className:"bpm-header"},"BPM"),r.a.createElement("div",{className:"bpm-value"},e.chart.activeBpm)),r.a.createElement("div",{className:"level-information"},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"song-difficulty"},t),r.a.createElement("div",{className:"song-level"},n.levels[k.indexOf(t)])))))})),pe=n(328),me=function(e){var t=e.displayedSongs,n=e.onSongSelect,a=e.selectedSongOption,i=t,o=function(e){return r.a.createElement("div",{className:"songTile-wrapper",key:"songtile_".concat(e.hash),onClick:function(){return function(e){n(null,{value:e.hash})}(e)}},r.a.createElement("div",{className:"songTile ".concat(a===e.hash?"selected":"")},r.a.createElement("div",{className:"song-jacket-wrapper"},r.a.createElement("img",{className:"song-jacket",src:j("".concat(e.hash,".png")),title:e.title,alt:e.title})),r.a.createElement("div",{className:"song-title-bar"},e.title)))};return r.a.createElement("div",{className:"songGrid"},i.map((function(e){return o(e)})))};function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ge(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var be=r.a.createElement("path",{id:"Line_1","data-name":"Line 1",d:"M0.91,15L0.78,15A1,1,0,0,0,0,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H0.91Z"}),ye=r.a.createElement("path",{id:"Line_2","data-name":"Line 2",d:"M6.91,9L6.78,9A1,1,0,0,0,6,10V28a1,1,0,1,0,2,0s0,0,0,0V10A1,1,0,0,0,7,9H6.91Z"}),Oe=r.a.createElement("path",{id:"Line_3","data-name":"Line 3",d:"M12.91,0L12.78,0A1,1,0,0,0,12,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H12.91Z"}),we=r.a.createElement("path",{id:"Line_4","data-name":"Line 4",d:"M18.91,10l-0.12,0A1,1,0,0,0,18,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H18.91Z"}),Ee=r.a.createElement("path",{id:"Line_5","data-name":"Line 5",d:"M24.91,15l-0.12,0A1,1,0,0,0,24,16v6a1,1,0,0,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H24.91Z"}),ke=r.a.createElement("path",{id:"Line_6","data-name":"Line 6",d:"M30.91,10l-0.12,0A1,1,0,0,0,30,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H30.91Z"}),Pe=r.a.createElement("path",{id:"Line_7","data-name":"Line 7",d:"M36.91,0L36.78,0A1,1,0,0,0,36,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H36.91Z"}),_e=r.a.createElement("path",{id:"Line_8","data-name":"Line 8",d:"M42.91,9L42.78,9A1,1,0,0,0,42,10V28a1,1,0,1,0,2,0s0,0,0,0V10a1,1,0,0,0-1-1H42.91Z"}),je=r.a.createElement("path",{id:"Line_9","data-name":"Line 9",d:"M48.91,15l-0.12,0A1,1,0,0,0,48,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H48.91Z"}),Se=function(e){var t=e.svgRef,n=e.title,a=ge(e,["svgRef","title"]);return r.a.createElement("svg",ve({id:"audioWave","data-name":"Layer 1",viewBox:"0 0 50 38.05",ref:t},a),n?r.a.createElement("title",null,n):null,be,ye,Oe,we,Ee,ke,Pe,_e,je)},De=r.a.forwardRef((function(e,t){return r.a.createElement(Se,ve({svgRef:t},e))}));n.p;function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=[{key:"title_all",value:"all",text:"ALL"}].concat(["\u3042","\u304b","\u3055","\u305f","\u306a","\u306f","\u307e","\u3084","\u3089","\u308f","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NUM"].map((function(e){return{key:"title_".concat(e),value:e,text:e}}))),Ne=[{key:"version_all",value:"all",text:"ALL"}].concat(["DDR 1st","DDR 2ndMIX","DDR 3rdMIX","DDR 4thMIX","DDR 5thMIX","DDRMAX","DDRMAX2","DDR EXTREME","DDR SuperNOVA","DDR SuperNOVA 2","DDR X","DDR X2","DDR X3 VS 2ndMIX","DDR (2013)","DDR (2014)","DDR A","DDR A20"].map((function(e,t){return{key:"version_".concat(t),value:t,text:e}})).reverse()),Ie=[{key:"level_all",value:"all",text:"ALL"}].concat([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19].map((function(e){return{key:"level_".concat(e),value:e,text:e}}))),Le=[{key:"difficulty_all",value:"all",text:"ALL"}].concat(k.map((function(e){return{key:"difficulty_".concat(e),value:e,text:e}}))),Te=Object(s.b)((function(e){return{previewAudio:e.audio.previewAudio}}),(function(e){return{}}))((function(e){var t=e.activeView,n=e.simfileList,i=e.selectedDifficulty,o=e.previewAudio,s=Object(a.useRef)(),c=n.map((function(e){return{key:e.hash,value:e.hash,text:e.title}})),h=Object(a.useState)(null),d=Object(f.a)(h,2),p=d[0],m=d[1],v=Object(a.useState)(i),g=Object(f.a)(v,2),b=g[0],y=g[1],O=Object(a.useState)({title:"all",version:16,level:"all",difficulty:"all"}),w=Object(f.a)(O,2),E=w[0],P=w[1],_=Object(a.useState)([]),S=Object(f.a)(_,2),D=S[0],A=S[1];Object(a.useEffect)((function(){var e=E.title,t=E.version,a=E.level,r=E.difficulty,i=n.filter((function(n){return("all"===e||e===n.abcSort)&&("all"===t||t===parseInt(n.version))&&("all"===a||n.levels.slice(0,5).includes(a))})).filter((function(e){return"all"!==r?"all"===a?null!==e.levels[k.indexOf(r)]:e.levels[k.indexOf(r)]===a:e}));A(i),s.current.scrollTop=0}),[E]);var x=Object(a.useState)(null),C=Object(f.a)(x,2),N=C[0],I=C[1];Object(a.useEffect)((function(){L(null,{value:"PooiIP8qP0IPd9D1Ibi6l9bDoqdi9P8O"})}),[]),Object(a.useEffect)((function(){if(p){var e=n.find((function(e){return e.hash===p}));I(e),ce.storeAudioSource(e)}}),[p]);var L=function(){var t=Object(u.a)(l.a.mark((function t(a,r){var i,o,s,c,u,f,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.value,m(i),ce.stopSongPreview(),o=n.find((function(e){return e.hash===i})),"all"===E.difficulty){t.next=8;break}T(E.difficulty),t.next=46;break;case 8:if("all"===E.level){t.next=21;break}s=0;case 10:if(!(s<o.levels.length)){t.next=19;break}if((c=o.levels[s])!==E.level){t.next=16;break}return console.log("match",k[s],c),T(k[s]),t.abrupt("break",19);case 16:s++,t.next=10;break;case 19:t.next=46;break;case 21:if(u=k.indexOf(b),!o.levels[u]){t.next=26;break}e.onDifficultySelect(b),t.next=46;break;case 26:if(!["Difficult","Expert","Challenge"].includes(b)){t.next=37;break}f=4;case 28:if(!(f>=0)){t.next=35;break}if(!o.levels[f]){t.next=32;break}return e.onDifficultySelect(k[f]),t.abrupt("break",35);case 32:f--,t.next=28;break;case 35:t.next=46;break;case 37:if(!["Beginner","Basic"].includes(b)){t.next=46;break}h=0;case 39:if(!(h<=4)){t.next=46;break}if(!o.levels[h]){t.next=43;break}return e.onDifficultySelect(k[h]),t.abrupt("break",46);case 43:h++,t.next=39;break;case 46:e.onSongSelect(o);case 47:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(t){y(t),e.onDifficultySelect(t)};return r.a.createElement("div",{className:"form-container songView ".concat("song"===t?"open":"closed")},r.a.createElement("form",{className:"songForm"},r.a.createElement("div",{className:"form-inner-wrapper"},r.a.createElement("div",{className:"selectedSong"},r.a.createElement("div",{className:"selectedSong-jacket-wrapper ".concat("playing"===o.status?"playing":"")},r.a.createElement("div",{className:"selectedSong-jacket-overlay"},r.a.createElement(De,null)),r.a.createElement("img",{className:"selectedSong-jacket",src:j("".concat(p,".png")),alt:"Selected song",onClick:function(){ce.currentPreview===N.hash?"playing"===o.status?ce.stopSongPreview():ce.playSongPreview(N):("playing"===o.status&&ce.stopSongPreview(),ce.playSongPreview(N))}})),r.a.createElement("div",{className:"selectedSong-info"},r.a.createElement(pe.a,{placeholder:"Choose a song",className:"song-title-dropdown",search:!0,selection:!0,value:p,onChange:L,options:c,selectOnBlur:!1,selectOnNavigation:!1}),r.a.createElement("div",{className:"song-artist"},N&&N.artist),r.a.createElement("div",{className:"song-difficulties"},N?N.levels.slice(0,5).map((function(e,t){if(!e)return null;var n=k[t];return r.a.createElement("div",{className:"song-difficulty ".concat(n," ").concat(i===n?"selected":""),key:"sp-difficulty_".concat(n),onClick:function(){return T(n)}},r.a.createElement("div",{className:"difficulty"},n),r.a.createElement("div",{className:"level"},e))})):null))),r.a.createElement("div",{className:"songForm-filters"},r.a.createElement("div",{className:"songForm-filters-row"},r.a.createElement("div",{className:"form-field"},r.a.createElement("label",null,"By Title"),r.a.createElement(pe.a,{className:"title-filter-dropdown",selection:!0,value:E.title,onChange:function(e,t){return P(xe({},E,{title:t.value}))},options:Ce})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",null,"By Version"),r.a.createElement(pe.a,{className:"version-filter-dropdown",selection:!0,value:E.version,onChange:function(e,t){return P(xe({},E,{version:t.value}))},options:Ne})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",null,"By Level"),r.a.createElement(pe.a,{className:"level-filter-dropdown",selection:!0,value:E.level,onChange:function(e,t){return P(xe({},E,{level:t.value}))},options:Ie}),r.a.createElement("label",null,"By Difficulty"),r.a.createElement(pe.a,{className:"difficulty-filter-dropdown",selection:!0,value:E.difficulty,onChange:function(e,t){return P(xe({},E,{difficulty:t.value}))},options:Le})))))),r.a.createElement("div",{className:"songGrid-container",ref:s},r.a.createElement(me,{displayedSongs:D,onSongSelect:L,selectedSongOption:p})))})),Be=n(327),Re=n(319),Fe=Object(s.b)((function(e){return{mods:e.mods}}),(function(e){return{updateMods:function(t){return e(function(e){return function(t){t({type:"UPDATE_MODS",payload:e})}}(t))}}}))((function(e){var t=e.activeView,n=(e.simfileList,e.selectedDifficulty,e.mods),a=(e.gameEngine,e.updateMods);return r.a.createElement("div",{className:"form-container ".concat("mods"===t?"open":"closed")},r.a.createElement("form",null,r.a.createElement("div",{className:"form-field"},r.a.createElement("h4",{className:"form-label"},"Speed"),$.mods.speed.map((function(e){return r.a.createElement(Be.a,{key:"speed_".concat(e),label:"".concat(e,"x"),name:"speed",value:e,checked:n.speed===e,onChange:function(){return a({speed:e})}})}))),r.a.createElement("div",{className:"form-field"},r.a.createElement("h4",{className:"form-label"},"Arrow color"),$.mods.noteskin.map((function(e){return r.a.createElement(Be.a,{key:"noteskin_".concat(e),label:S(e),name:"noteskin",value:e,checked:n.noteskin===e,onChange:function(){return a({noteskin:e})}})}))),r.a.createElement("div",{className:"form-field"},r.a.createElement("h4",{className:"form-label"},"Turn"),$.mods.turn.map((function(e){return r.a.createElement(Be.a,{key:"turn_".concat(e),label:S(e),name:"turn",value:e,checked:n.turn===e,onChange:function(){return a({turn:e})}})}))),"shuffle"===n.turn&&r.a.createElement("div",{className:"form-field"},r.a.createElement("h4",{className:"form-label"},"Shuffle pattern"),$.mods.shuffle.map((function(e){return r.a.createElement(Be.a,{key:"shuffle_".concat(e),label:e,name:"shuffle",value:e,checked:n.shuffle===e,onChange:function(){return a({shuffle:e})}})}))),r.a.createElement("h4",null,"Miscellaneous"),r.a.createElement("div",{className:"form-field"},r.a.createElement(Re.a,{toggle:!0,label:"Color freeze heads",name:"colorFreezes",checked:n.colorFreezes,onChange:function(){return a({colorFreezes:!n.colorFreezes})}}))))})),Me=Object(s.b)((function(e){var t=e.audio;return{chartAudio:t.chartAudio,previewAudio:t.previewAudio}}),(function(e){return{stopPreviewAudio:function(){return e((function(e){e({type:"STOP_PREVIEW_AUDIO"})}))}}}))((function(e){var t=e.activeView,n=e.chartAudio,a=(e.previewAudio,function(e){return"song"===e&&"playing"===n.status});return r.a.createElement("nav",{className:"mobileNav"},[{view:"song",icon:"music"},{view:"mods",icon:"sidebar"},{view:"2",icon:""},{view:"3",icon:""},{view:"chart",icon:"arrow up"}].map((function(i){var o=i.view,s=i.icon;return o?r.a.createElement("div",{key:"mobileNavItem_".concat(o),className:"mobileNav_item ".concat(t===o?"active":""," ").concat(a(o)?"disabled":""),onClick:function(){return function(t){"song"===t&&"playing"===n.status||(ce.stopSongPreview(),e.setActiveView(t))}(o)}},r.a.createElement(p.a,{name:s})):r.a.createElement("div",{className:"mobileNav_item"})})))})),Ve=function(e){var t=Object(a.useState)(!0),n=Object(f.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)([]),c=Object(f.a)(s,2),d=c[0],p=c[1],m=Object(a.useState)(null),v=Object(f.a)(m,2),g=v[0],b=v[1],y=Object(a.useState)(null),O=Object(f.a)(y,2),w=O[0],E=O[1],k=Object(a.useState)(ee),_=Object(f.a)(k,2),j=_[0],S=_[1],D=Object(a.useState)(null),A=Object(f.a)(D,2),x=A[0],C=A[1],N=Object(a.useState)(te),I=Object(f.a)(N,2),L=(I[0],I[1],Object(a.useState)("song")),T=Object(f.a)(L,2),B=T[0],R=T[1],F=Object(a.useState)(null),M=Object(f.a)(F,2),V=M[0],U=M[1],z=Object(a.useState)(!1),H=Object(f.a)(z,2),X=H[0],Z=H[1];Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:o(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),ce.setLoadingAudio=Z}),[]);var G=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.a)(window.location.href+"/data/simfiles.tsv");case 3:(t=e.sent).forEach((function(e){e.levels=e.levels.split(",").map((function(e){return e?parseInt(e):null}))})),p(t),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("MainContainer selected song",t),ce.selectSong(t),b(t),n=t.smName,"OddDoQ6dqi0QdQDDOO6qlO08d8bPbli1"===t.hash&&(n=n.replace("1",Math.floor(4*Math.random())+1)),e.prev=5,e.next=8,P("".concat(window.location.href,"/simfiles/").concat(encodeURIComponent(n),".sm"));case 8:a=e.sent,E(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){S(e)},Y=function(e){R(e),ce.activeView=e};return r.a.createElement("div",{className:"main-container"},!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{loadingAudio:X,selectedSong:g,selectedDifficulty:j,sm:w,selectedAudio:x,gameEngine:V,setGameEngine:U}),r.a.createElement(Te,{activeView:B,setActiveView:Y,simfileList:d,selectedDifficulty:j,onSongSelect:Q,onDifficultySelect:W,loadingAudio:X}),r.a.createElement(Fe,{activeView:B,simfileList:d,selectedSong:g,onSongSelect:Q,selectedDifficulty:j,onDifficultySelect:W,selectedAudio:x,setSelectedAudio:C,gameEngine:V}),r.a.createElement(Me,{activeView:B,setActiveView:Y})))};var Ue=function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(Ve,null))};o.a.render(r.a.createElement(s.a,{store:se},r.a.createElement(Ue,null)),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.61665090.chunk.js.map